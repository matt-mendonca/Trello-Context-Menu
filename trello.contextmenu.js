// Generated by CoffeeScript 1.6.3
(function() {
  var $;

  $ = jQuery;

  window.trelloJS = window.trelloJS || {};

  trelloJS.contextMenu = (function() {
    var cardClick, cardOperationClick, listClick;
    cardOperationClick = function(card_operation) {
      card_operation.click();
      /*
      !!!!!!!Hacky code!!!!!!!!!
      Prevent user from having to double click open another menu
      */

      if ($(".pop-over").css("display") === "none") {
        return card_operation.click();
      }
    };
    listClick = function(event) {
      var card_operation;
      card_operation = $(this).find(".js-open-list-menu");
      cardOperationClick(card_operation);
      event.preventDefault();
    };
    cardClick = function(event) {
      /*
      Sometimes .card-operation is a sibling of .list-card-details, sometimes it is a child.
      Move up one level in the DOM (.parent()), then find .card-operation.
      This will match siblings and childen of .list-card-details
      */

      var card_operation;
      card_operation = $(this).parent(".list-card").find(".card-operation");
      cardOperationClick(card_operation);
      return false;
    };
    return {
      listClick: listClick,
      cardClick: cardClick
    };
  })();

  $(document).ready(function() {
    $(".list").on("contextmenu", trelloJS.contextMenu.listClick);
    return $(".list-card-details").on("contextmenu", trelloJS.contextMenu.cardClick);
  });

}).call(this);
